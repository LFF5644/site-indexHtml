<?
const service_storage=service_require("server/serverStorage/serverStorage");
const service_projects=service_require("server/projects/projects");
const {
	randomIndex,
	jsonStringify
}=globals.functions;
?><!DOCTYPE html>
<!--IndexHtml update at 23.12.2022 at 23:32-->
<html>
<head>
	<title>Landos Webseite</title>
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/main.dark.css">
	<style>
		body{
			max-width: 600px;
			margin: 0 auto;
			padding: 0 20px;
		}
		h1,h2,h3,h4,h5,h6{
			margin-left: 50px;
		}
	</style>
</head>
<body>
<h1>
	Landos Webseite 
	<span class="green" title="Copierigt (ja ich habs SAVE falsch geshreiben!)">©</span>
	<span class="red" title="Hier wird immer das jzige jahr drin stehen!">
		<?=new Date().getFullYear()?>
	</span>
</h1>
<p>
	<span class=green title="<?=new Date()?>">Bot</span>: <?
		let msg="<span title=\"zu der zeit fält mir nichts ein!\">Hallo!</span>"
		const date=new Date();
		const hour=date.getHours();
		const hours=service_storage.readStorage("botMsgs_hours");

		const msgObject=hours.find(item=>
			(
				item.from<=hour&&
				item.to>=hour
			)||
			(
				item.allowed?
					item.allowed:
					[]
			)
				.includes(hour)
		);
		if(msgObject){
			const index=randomIndex(msgObject.msgs.length-1);
			msg=msgObject.msgs[index];
		}
	?><?=msg?>
</p>
<table>
<?
	const projects=service_projects.getProjects();
	let project;
	for(project of projects){
		let html="";
		html+=`\t<tr>\n`;
		html+=`\t\t<td class=ProjectName>${project.name}</td>\n`;
		html+=`\t\t<td class=ProjectVersion>${project.version}</td>\n`;
		if(project.versionTag){
			const color=project.versionTagColor;
			html+=`\t\t<td class=ProjectVersionTag${color?` style="color:${color}"`:""}>${project.versionTag}</td>\n`;
		}
		html+="\t</tr>\n";
		?><?=html?><?	// Write 'html' into the html file!
	}
?></table>
</body>
</html>
